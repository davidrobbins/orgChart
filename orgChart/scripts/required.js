/*** @author admin*/var __myNameSpace 	= __myNameSpace || {};__myNameSpace.ERRORS = {	'login' : {		'passwordInvalid': {			error		: 12,			errorMessage: "Invalid password"		},		'notExist': {			error		: 13,			errorMessage: "Login does not exist"		},		'notConnected': {			error		: 14,			errorMessage: "You must be connected"		}	},	Model : {			}};__myNameSpace.DirectoryROLES = {	ADMINISTRATOR	: 'Administrator'}function loginHandler(emailAddress , password){	var	ERRORS			= __myNameSpace.ERRORS,	directoryROLES	= __myNameSpace.DirectoryROLES,	sessionRef 		= currentSession(),	promoteToken 	= sessionRef.promoteWith(directoryROLES.ADMINISTRATOR),	myUser 			= ds.Employee({email:emailAddress}),	groups			= [];		sessionRef.unPromote(promoteToken);		if (myUser === null) {		return false	}	else {		if (myUser.validatePassword(password)) {						if (emailAddress == "dave@wakanda.org") {				groups = ['Administrator'];			}						return {				name		: emailAddress,				fullName	: myUser.fullName,				belongsTo	: groups,				storage		: {					ID			: myUser.getKey(),					fullname	: myUser.fullname,					connectTime	: new Date()				}			}					} else {			return ERRORS.login.passwordInvalid;		}	}		return ERRORS.login.notExist;}